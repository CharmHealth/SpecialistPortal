import React, { useRef, useState, useEffect } from 'react';
import { useParams, useNavigate, useLocation } from 'react-router-dom';

const Confirmation = () => {

    const { search } = useLocation();
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    // Get the JSON string from the query parameter
    const bookingDataString = urlParams.get('bookingData');

    // Parse the JSON string back into an object
    const bookingData = JSON.parse(decodeURIComponent(bookingDataString));
    const [patient, setPatient] = useState(null)

    useEffect(() => {
        console.log('why')
        // Retrieve form state from local storage
        const storedFormState = JSON.parse(localStorage.getItem('formState'));
        setPatient(storedFormState);

        // If form state exists in local storage, set the component state

    }, []);
    return (

        <div className="w-full h-screen flex flex-col items-center">
            {patient && (
                <div className="mt-8 p-8 bg-domino-gray rounded-2xl w-[40rem] flex flex-col items-center ">
                    <div className="mt-4 w-fit h-fit p-4 rounded-full bg-[#397e34] flex items-center ">
                        <svg width="40" height="40" viewBox="0 0 95 76" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M30.5939 75.1257L1.11008 45.6462C0.399369 44.9355 0 43.9709 0 42.9658C0 41.9606 0.399369 40.996 1.11008 40.2853L6.47011 34.9253C7.18082 34.2146 8.14455 33.8152 9.15056 33.8152C10.1557 33.8152 11.1194 34.2146 11.8301 34.9253L30.5941 53.6858L83.1699 1.11008C83.8814 0.399371 84.8443 0 85.8494 0C86.8546 0 87.8192 0.399371 88.5299 1.11008L93.8899 6.47011C94.6006 7.18082 95 8.14539 95 9.15055C95 10.1557 94.6006 11.1203 93.8899 11.831L30.5939 75.1257Z" fill="white" />
                        </svg>

                    </div>
                    <h3 className="mt-6 text-center text-3xl text-stone-200">Booking Confirmed!</h3>
                    <h5 className="mt-2 text-center text-stone-200">Your confirmation details has been sent to {patient.email}.
                        <br />Here is a summary:</h5>

                    <div className="w-full flex flex-row mt-6">
                        <div className="flex flex-col w-1/2">
                            <div className="">
                                <h3 className="text-lg text-stone-200 border-b-2 w-fit font-semibold">Visit Type</h3>
                                <h5 className="mt-1 text-stone-200 "> Initial Consultation</h5>
                            </div>
                        </div>
                        <div className="flex flex-col w-1/2">
                            <div className="">
                                <h3 className="text-lg text-stone-200 border-b-2 w-fit font-semibold">With</h3>
                                <h5 className="mt-1 text-stone-200 ">Dr. {bookingData.fName} {bookingData.lName}, {bookingData.deg}</h5>
                            </div>
                        </div>

                    </div>

                    <div className="w-full flex flex-row mt-6">
                        <div className="flex flex-col w-1/2">
                            <div className="">
                                <h3 className="text-lg text-stone-200 border-b-2 w-fit font-semibold">When</h3>
                                <h5 className="mt-1 text-stone-200 ">{bookingData.day} </h5>
                                <h5 className="mt-1 text-stone-200 ">{bookingData.time} </h5>
                            </div>
                        </div>
                        <div className="flex flex-col w-1/2">
                            <div className="">
                                <h3 className="text-lg text-stone-200 border-b-2 w-fit font-semibold">Where</h3>
                                <h5 className="mt-1 text-stone-200 ">Virtual
                                    (More details will be sent to your email)</h5>
                            </div>
                        </div>

                    </div>

                    {/* <div className="w-1/2">
                        <h3 className="w-fit text-2xl text-stone-200">Appointment information</h3>
                        <div className="mt-2 flex flex-row items-center">
                            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.4548 19.7601H9.89009V19.2208C9.89009 18.9653 9.64842 18.7585 9.34983 18.7585C9.05124 18.7585 8.80957 18.9653 8.80957 19.2208V19.7601H8.21312C7.91453 19.7601 7.67285 19.9669 7.67285 20.2223C7.67285 20.4778 7.91453 20.6846 8.21312 20.6846H8.80957V21.2624C8.80957 21.5178 9.05124 21.7246 9.34983 21.7246C9.64842 21.7246 9.89009 21.5178 9.89009 21.2624V20.6846H10.4548C10.7534 20.6846 10.9951 20.4778 10.9951 20.2223C10.9951 19.9669 10.7534 19.7601 10.4548 19.7601Z" fill="#E7E5E4" />
                                <path d="M21.0519 15.104C20.6971 14.9829 20.3618 14.8682 20.0697 14.7456C18.7414 14.1881 17.3792 13.3456 16.6282 12.8529C18.835 11.5992 20.9356 9.43071 20.9356 6.99221C20.9356 3.07115 17.5042 0 13.1234 0C8.74254 0 5.31115 3.07146 5.31115 6.99221C5.31115 9.45043 7.54928 11.5919 9.7532 12.8368C8.85636 13.3339 7.27303 14.182 5.92993 14.7456C5.63783 14.8682 5.30251 14.9829 4.94773 15.104C2.85979 15.8174 0 16.7943 0 21.3557V25.5378C0 25.7932 0.241678 26 0.540263 26C0.637511 26 0.728635 25.9781 0.807874 25.9396H13.0971H13.0978H25.1921C25.271 25.9781 25.3625 26 25.4597 26C25.7583 26 26 25.7932 26 25.5378V21.3554C25.9996 16.7943 23.1398 15.8174 21.0519 15.104ZM6.39168 6.99221C6.39168 3.53278 9.28569 0.924488 13.1234 0.924488C16.961 0.924488 19.855 3.53309 19.855 6.99221C19.855 10.4338 15.0752 13.0599 13.1234 13.0599C12.6623 13.0599 11.933 12.8464 11.1215 12.4661C11.0682 12.427 11.0073 12.3977 10.9425 12.3792C8.88229 11.3666 6.39168 9.32901 6.39168 6.99221ZM13.1234 13.9847C13.8261 13.9847 14.7089 13.7585 15.6251 13.357C16.1009 13.6806 17.1357 14.3579 18.3193 14.973L13.0816 17.7382L7.7852 14.9468C9.05482 14.3317 10.261 13.6618 10.7927 13.3601C11.6985 13.7604 12.5338 13.9847 13.1234 13.9847ZM4.66608 19.8016C5.22759 19.8016 5.68393 20.1924 5.68393 20.6725C5.68393 21.1526 5.22723 21.5437 4.66608 21.5437C4.10492 21.5437 3.64786 21.1529 3.64786 20.6725C3.64786 20.1921 4.10456 19.8016 4.66608 19.8016ZM1.08053 21.3554C1.08053 18.2186 2.52123 17.0907 4.11933 16.4158V18.9409C3.22681 19.1477 2.56769 19.8445 2.56769 20.6725C2.56769 21.6626 3.50919 22.4681 4.66644 22.4681C5.82332 22.4681 6.76482 21.6626 6.76482 20.6725C6.76482 19.8404 6.09885 19.1409 5.19986 18.9381V16.0134C5.24956 15.9961 5.29926 15.9792 5.34861 15.9622C5.72319 15.8343 6.07688 15.7135 6.40608 15.5755C6.50873 15.5323 6.61318 15.4867 6.718 15.4408C6.75365 15.4769 6.79435 15.5098 6.84406 15.536L12.5428 18.5394L12.5561 25.0148H1.08089V21.3554H1.08053ZM24.9191 25.0148H13.6362L13.6229 18.5388L19.3501 15.5151C19.3652 15.5071 19.3782 15.4966 19.3922 15.4876C19.4596 15.5172 19.5266 15.5474 19.5939 15.5758C19.9231 15.7138 20.2768 15.8346 20.6514 15.9625C20.8318 16.0242 21.0144 16.0867 21.1974 16.152V19.3458C20.834 19.426 20.5023 19.5831 20.226 19.8127C19.8071 20.1606 19.5719 20.6275 19.5633 21.1267L19.5406 22.4265C19.5385 22.5504 19.5946 22.6703 19.6966 22.7584C19.7981 22.8463 19.9364 22.8959 20.0809 22.8959C20.0812 22.8959 20.082 22.8959 20.0827 22.8959L20.9907 22.8934C21.2889 22.8928 21.5302 22.6851 21.5291 22.4296C21.5284 22.1748 21.2864 21.9689 20.9889 21.9689C20.9885 21.9689 20.9878 21.9689 20.9871 21.9689L20.6294 21.9698L20.6442 21.1406C20.6485 20.8882 20.7674 20.6525 20.9792 20.4765C21.1909 20.3005 21.473 20.2022 21.7658 20.2096C22.0608 20.213 22.3367 20.315 22.5423 20.4962C22.748 20.6774 22.8585 20.9162 22.8542 21.1689L22.8402 22.0078L22.5394 22.0044C22.5369 22.0044 22.5348 22.0044 22.5322 22.0044C22.2372 22.0044 21.9959 22.2074 21.992 22.4608C21.9884 22.7162 22.2272 22.9255 22.5254 22.9289L23.3653 22.9378C23.3678 22.9378 23.37 22.9378 23.3725 22.9378C23.6671 22.9378 23.9081 22.735 23.9128 22.482L23.9348 21.1822C23.9434 20.6827 23.7244 20.2105 23.3174 19.8522C23.0293 19.5979 22.6702 19.4247 22.2783 19.3418V16.5961C23.71 17.2941 24.9195 18.4814 24.9195 21.3554L24.9191 25.0148Z" fill="#E7E5E4" />
                            </svg>
                            <h5 className="ml-4 text-lg text-stone-200">Dr. {bookingData.fName} {bookingData.lName} {bookingData.deg}</h5>
                        </div>
                        <div className="mt-2 flex flex-row items-center">
                            <svg width="26" height="26" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.10723 8.06421H2.5088C2.23999 8.06421 2.06079 8.24341 2.06079 8.51221V11.1106C2.06079 11.3795 2.23999 11.5587 2.5088 11.5587H5.10723C5.37603 11.5587 5.55523 11.3795 5.55523 11.1106V8.51221C5.55523 8.24341 5.37603 8.06421 5.10723 8.06421ZM4.65922 10.6178H2.9568V8.91542H4.65922V10.6178Z" fill="#E7E5E4" />
                                <path d="M9.81133 8.06421H7.2129C6.94409 8.06421 6.76489 8.24341 6.76489 8.51221V11.1106C6.76489 11.3795 6.94409 11.5587 7.2129 11.5587H9.81133C10.0801 11.5587 10.2593 11.3795 10.2593 11.1106V8.51221C10.2593 8.24341 10.0353 8.06421 9.81133 8.06421ZM9.36332 10.6178H7.6609V8.91542H9.36332V10.6178Z" fill="#E7E5E4" />
                                <path d="M14.4705 8.06421H11.8721C11.6033 8.06421 11.4241 8.24341 11.4241 8.51221V11.1106C11.4241 11.3795 11.6033 11.5587 11.8721 11.5587H14.4705C14.7393 11.5587 14.9185 11.3795 14.9185 11.1106V8.51221C14.9185 8.24341 14.7393 8.06421 14.4705 8.06421ZM14.0225 10.6178H12.3201V8.91542H14.0225V10.6178Z" fill="#E7E5E4" />
                                <path d="M19.1297 8.06421H16.5313C16.2625 8.06421 16.0833 8.24341 16.0833 8.51221V11.1106C16.0833 11.3795 16.2625 11.5587 16.5313 11.5587H19.1297C19.3985 11.5587 19.5777 11.3795 19.5777 11.1106V8.51221C19.5777 8.24341 19.3985 8.06421 19.1297 8.06421ZM18.6817 10.6178H16.9793V8.91542H18.6817V10.6178Z" fill="#E7E5E4" />
                                <path d="M5.10723 17.3826H2.5088C2.23999 17.3826 2.06079 17.5618 2.06079 17.8306V20.429C2.06079 20.6978 2.23999 20.877 2.5088 20.877H5.10723C5.37603 20.877 5.55523 20.6978 5.55523 20.429V17.8306C5.55523 17.6066 5.37603 17.3826 5.10723 17.3826ZM4.65922 19.981H2.9568V18.2786H4.65922V19.981Z" fill="#E7E5E4" />
                                <path d="M9.81133 17.3826H7.2129C6.94409 17.3826 6.76489 17.5618 6.76489 17.8306V20.429C6.76489 20.6978 6.94409 20.877 7.2129 20.877H9.81133C10.0801 20.877 10.2593 20.6978 10.2593 20.429V17.8306C10.2593 17.6066 10.0353 17.3826 9.81133 17.3826ZM9.36332 19.981H7.6609V18.2786H9.36332V19.981Z" fill="#E7E5E4" />
                                <path d="M14.4705 17.3826H11.8721C11.6033 17.3826 11.4241 17.5618 11.4241 17.8306V20.429C11.4241 20.6978 11.6033 20.877 11.8721 20.877H14.4705C14.7393 20.877 14.9185 20.6978 14.9185 20.429V17.8306C14.9185 17.6066 14.7393 17.3826 14.4705 17.3826ZM14.0225 19.981H12.3201V18.2786H14.0225V19.981Z" fill="#E7E5E4" />
                                <path d="M19.1297 17.3826H16.5313C16.2625 17.3826 16.0833 17.5618 16.0833 17.8306V20.429C16.0833 20.6978 16.2625 20.877 16.5313 20.877H19.1297C19.3985 20.877 19.5777 20.6978 19.5777 20.429V17.8306C19.5777 17.6066 19.3985 17.3826 19.1297 17.3826ZM18.6817 19.981H16.9793V18.2786H18.6817V19.981Z" fill="#E7E5E4" />
                                <path d="M5.10723 12.7234H2.5088C2.23999 12.7234 2.06079 12.9026 2.06079 13.1714V15.7698C2.06079 16.0386 2.23999 16.2178 2.5088 16.2178H5.10723C5.37603 16.2178 5.55523 16.0386 5.55523 15.7698V13.1714C5.55523 12.9026 5.37603 12.7234 5.10723 12.7234ZM4.65922 15.3218H2.9568V13.6194H4.65922V15.3218Z" fill="#E7E5E4" />
                                <path d="M9.81133 12.7234H7.2129C6.94409 12.7234 6.76489 12.9026 6.76489 13.1714V15.7698C6.76489 16.0386 6.94409 16.2178 7.2129 16.2178H9.81133C10.0801 16.2178 10.2593 16.0386 10.2593 15.7698V13.1714C10.2593 12.9026 10.0353 12.7234 9.81133 12.7234ZM9.36332 15.3218H7.6609V13.6194H9.36332V15.3218Z" fill="#E7E5E4" />
                                <path d="M14.4705 12.7234H11.8721C11.6033 12.7234 11.4241 12.9026 11.4241 13.1714V15.7698C11.4241 16.0386 11.6033 16.2178 11.8721 16.2178H14.4705C14.7393 16.2178 14.9185 16.0386 14.9185 15.7698V13.1714C14.9185 12.9026 14.7393 12.7234 14.4705 12.7234ZM14.0225 15.3218H12.3201V13.6194H14.0225V15.3218Z" fill="#E7E5E4" />
                                <path d="M19.1297 12.7234H16.5313C16.2625 12.7234 16.0833 12.9026 16.0833 13.1714V15.7698C16.0833 16.0386 16.2625 16.2178 16.5313 16.2178H19.1297C19.3985 16.2178 19.5777 16.0386 19.5777 15.7698V13.1714C19.5777 12.9026 19.3985 12.7234 19.1297 12.7234ZM18.6817 15.3218H16.9793V13.6194H18.6817V15.3218Z" fill="#E7E5E4" />
                                <path d="M25.9395 19.3986L21.6835 4.07685V3.89765C21.6835 2.86724 20.8323 2.01602 19.8018 2.01602H18.7714C18.5922 0.85121 17.6962 0 16.5762 0C15.4562 0 14.605 0.85121 14.381 2.01602H13.037C12.8578 0.85121 11.9617 0 10.8417 0C9.72172 0 8.87051 0.85121 8.64651 2.01602H7.30249C7.12329 0.85121 6.22728 0 5.10726 0C3.98725 0 3.13604 0.85121 2.95684 2.01602H1.88162C0.85121 2.01602 0 2.86724 0 3.89765V21.0563C0 22.0867 0.85121 22.9379 1.88162 22.9379H19.757C20.6979 22.9379 21.4595 22.2659 21.6387 21.3699H24.4163C24.9091 21.3699 25.3571 21.1459 25.6707 20.7427C25.9843 20.3843 26.0739 19.8914 25.9395 19.3986ZM16.5314 0.851211C17.1138 0.851211 17.6514 1.34402 17.7858 1.97122H15.277C15.4562 1.34402 15.949 0.851211 16.5314 0.851211ZM10.8417 0.851211C11.4241 0.851211 11.9617 1.34402 12.0961 1.97122H9.58732C9.72172 1.34402 10.2145 0.851211 10.8417 0.851211ZM5.10726 0.851211C5.68967 0.851211 6.22728 1.34402 6.36168 1.97122H3.85285C4.03205 1.34402 4.52486 0.851211 5.10726 0.851211ZM1.88162 2.91204H2.91204C3.09124 4.07685 3.98725 4.92806 5.10726 4.92806C5.37607 4.92806 5.55527 4.74886 5.55527 4.48006C5.55527 4.21125 5.37607 4.03205 5.10726 4.03205C4.52486 4.03205 3.98725 3.53924 3.85285 2.91204H8.64651C8.82571 4.07685 9.72172 4.92806 10.8417 4.92806C11.1105 4.92806 11.2897 4.74886 11.2897 4.48006C11.2897 4.21125 11.1105 4.03205 10.8417 4.03205C10.2593 4.03205 9.72172 3.53924 9.58732 2.91204H14.381C14.5602 4.07685 15.4562 4.92806 16.5762 4.92806C16.845 4.92806 17.0242 4.74886 17.0242 4.48006C17.0242 4.21125 16.845 4.03205 16.5762 4.03205C15.9938 4.03205 15.4562 3.53924 15.3218 2.91204H19.8018C20.3395 2.91204 20.7875 3.36004 20.7875 3.89765V5.95847H0.896011V3.89765C0.896011 3.36004 1.34402 2.91204 1.88162 2.91204ZM19.757 22.0867H1.88162C1.34402 22.0867 0.896011 21.6387 0.896011 21.1011V6.85449H20.7875V21.0563C20.7875 21.5939 20.3395 22.0867 19.757 22.0867ZM24.9539 20.2498C24.8195 20.4291 24.6403 20.5187 24.4163 20.5187H21.6835V7.43689L25.0883 19.6674C25.1331 19.8466 25.0883 20.0706 24.9539 20.2498Z" fill="#E7E5E4" />
                            </svg>
                            <h5 className="ml-4 text-lg text-stone-200">{bookingData.day}</h5>
                        </div>
                        <div className="mt-2 flex flex-row items-center">
                            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.999 15C15.849 15 15.696 14.966 15.553 14.895L11.553 12.895C11.214 12.725 11 12.379 11 12V5C11 4.448 11.448 4 12 4C12.552 4 13 4.448 13 5V11.382L16.447 13.106C16.941 13.353 17.141 13.954 16.894 14.448C16.719 14.798 16.366 15 15.999 15ZM12 24C5.383 24 0 18.617 0 12C0 5.383 5.383 0 12 0C18.617 0 24 5.383 24 12C24 18.617 18.617 24 12 24ZM12 2C6.486 2 2 6.486 2 12C2 17.514 6.486 22 12 22C17.514 22 22 17.514 22 12C22 6.486 17.514 2 12 2Z" fill="#E7E5E4" />
                            </svg>
                            <h5 className="ml-4 text-lg text-stone-200">{bookingData.time}</h5>
                        </div>
                    </div>

                    <div className="">
                        <h3 className="text-2xl text-stone-200">Patient information</h3>
                        <div className="mt-2 flex flex-row items-center">
                            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.999 15C15.849 15 15.696 14.966 15.553 14.895L11.553 12.895C11.214 12.725 11 12.379 11 12V5C11 4.448 11.448 4 12 4C12.552 4 13 4.448 13 5V11.382L16.447 13.106C16.941 13.353 17.141 13.954 16.894 14.448C16.719 14.798 16.366 15 15.999 15ZM12 24C5.383 24 0 18.617 0 12C0 5.383 5.383 0 12 0C18.617 0 24 5.383 24 12C24 18.617 18.617 24 12 24ZM12 2C6.486 2 2 6.486 2 12C2 17.514 6.486 22 12 22C17.514 22 22 17.514 22 12C22 6.486 17.514 2 12 2Z" fill="#E7E5E4" />
                            </svg>
                            <h5 className="ml-4 text-lg text-stone-200">{patient.firstName} {patient.lastName}</h5>
                        </div>
                    </div> */}


                </div>
            )}


        </div>
    );
}

export default Confirmation;